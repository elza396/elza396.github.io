{"version":3,"sources":["components/lecture/lecture.module.css","components/lectures/lectures.module.css","App.module.css","components/main-page/main-page.module.css","db.js","components/lectures/lectures.js","res/images/positive.svg","res/images/neutral.svg","res/images/negative.svg","components/lecture/lecture.js","components/main-page/main-page.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","DB","firestore","Lectures","useState","lectures","setLectures","useEffect","collection","get","then","querySnapshot","forEach","doc","data","push","id","date","Date","seconds","toLocaleDateString","className","styles","title","map","lec","to","lecture","name","author","Lecture","lectureId","useParams","setLecture","isVoted","document","cookie","includes","loadLecture","useCallback","exists","console","log","catch","error","clickSmiley","votesType","update","smileys","disabled","onClick","smiley","src","positiveSmiley","alt","neutralSmiley","negativeSmiley","statistic","text","table","table__row","positiveVotes","neutralVotes","negativeVotes","MainPage","App","app","exact","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c69da74c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"lecture_name__1qDKW\",\"smileys\":\"lecture_smileys__2mmzT\",\"disabled\":\"lecture_disabled__vyx3F\",\"smiley\":\"lecture_smiley__307QD\",\"text\":\"lecture_text__1wrlk\",\"statistic\":\"lecture_statistic__3U0bX\",\"table\":\"lecture_table__221Um\",\"table__row\":\"lecture_table__row__3GBEV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"lectures_title__3W3uY\",\"lecture\":\"lectures_lecture__3qRmE\",\"name\":\"lectures_name__3rRnn\",\"author\":\"lectures_author__3lPyc\",\"date\":\"lectures_date__12mAq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"main-page_text__8Wqoo\"};","import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyAypwNpKLdGThypEiYlCqWuxZ_EkzgEQ7w\",\n    authDomain: \"lab-code-test.firebaseapp.com\",\n    projectId: \"lab-code-test\"\n});\n\nexport const DB = firebase.firestore();\n\n\n","import React, {useEffect, useState} from 'react';\nimport styles from './lectures.module.css';\nimport {Link} from \"react-router-dom\";\nimport {DB} from \"../../db\";\n\nexport function Lectures() {\n    const [lectures, setLectures] = useState([]);\n\n    useEffect(() => {\n        DB.collection(\"lectures\").get().then((querySnapshot) => {\n            const lectures = [];\n            querySnapshot.forEach((doc) => {\n                const data = doc.data()\n                lectures.push({id: doc.id, ...data, date: new Date(data.date.seconds * 1000).toLocaleDateString()});\n            });\n            setLectures(lectures);\n        });\n    }, [])\n\n    return (\n        <div>\n            <p className={styles.title}>Лекции</p>\n            {lectures.map((lec) => {\n                return (\n                    <Link to={`lectures/${lec.id}`} key={lec.id} className={styles.lecture}>\n                        <p className={styles.name}>{lec.name}</p>\n                        <p className={styles.author}>{lec.author}</p>\n                        <p className={styles.date}>{lec.date}</p>\n                    </Link>\n                )\n            })}\n        </div>\n    );\n}","export default __webpack_public_path__ + \"static/media/positive.d058201d.svg\";","export default __webpack_public_path__ + \"static/media/neutral.aca110ec.svg\";","export default __webpack_public_path__ + \"static/media/negative.c0c62b68.svg\";","import React, {useCallback, useEffect, useState} from 'react';\nimport styles from './lecture.module.css';\nimport positiveSmiley from './../../res/images/positive.svg';\nimport neutralSmiley from './../../res/images/neutral.svg';\nimport negativeSmiley from './../../res/images/negative.svg';\nimport {useParams} from \"react-router\";\nimport {DB} from \"../../db\";\n\n\nexport function Lecture() {\n    const {lectureId} = useParams();\n    const [lecture, setLecture] = useState(null);\n\n    const isVoted = document.cookie.includes(lectureId);\n\n    const loadLecture = useCallback((lectureId) => {\n        const docRef = DB.collection(\"lectures\").doc(lectureId);\n\n        docRef.get().then((doc) => {\n            if (doc.exists) {\n                const data = doc.data();\n                setLecture({id: doc.id, ...data, date: new Date(data.date.seconds * 1000).toLocaleDateString()});\n            } else {\n                console.log(\"Нет такой лекции!\");\n            }\n        }).catch((error) => {\n            console.log(\"Error getting document:\", error);\n        });\n    },[])\n\n    useEffect(() => {\n        loadLecture(lectureId);\n    }, [lectureId, loadLecture])\n\n    if (!lecture) {\n        return null;\n    }\n\n    function clickSmiley(votesType) {\n        if (isVoted) {\n            return;\n        }\n\n        DB.collection(\"lectures\").doc(lectureId).update({\n            [votesType]: ++lecture[votesType]\n        })\n            .then(() => {\n                loadLecture(lectureId);\n                document.cookie = `${lectureId}=1`;\n            })\n            .catch((error) => {\n                console.error(\"Error updating document: \", error);\n            });\n    }\n\n    return (\n        <div>\n            <p className={styles.name}>{lecture.name}</p>\n            <div className={`${styles.smileys} ${isVoted && styles.disabled}`}>\n                <img onClick={() => clickSmiley('positiveVotes')} className={styles.smiley} src={positiveSmiley} alt=\"positive\"/>\n                <img onClick={() => clickSmiley('neutralVotes')} className={styles.smiley} src={neutralSmiley} alt=\"neutral\"/>\n                <img onClick={() => clickSmiley('negativeVotes')} className={styles.smiley} src={negativeSmiley} alt=\"negative\"/>\n            </div>\n            <div className={styles.statistic}>\n                <p className={styles.text}>Статистика</p>\n                <div className={styles.table}>\n                    <div className={styles.table__row}>\n                        <img src={positiveSmiley} alt=\"positiveSmiley\"/>\n                        <p>{lecture.positiveVotes}</p>\n                    </div>\n                    <div className={styles.table__row}>\n                        <img src={neutralSmiley} alt=\"neutralSmiley\"/>\n                        <p>{lecture.neutralVotes}</p>\n                    </div>\n                    <div className={styles.table__row}>\n                        <img src={negativeSmiley} alt=\"negativeSmiley\"/>\n                        <p>{lecture.negativeVotes}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n","import React from 'react';\nimport styles from './main-page.module.css';\nimport {Link} from \"react-router-dom\";\n\n\nexport function MainPage() {\n\n    return (\n        <div>\n            <Link to={'lectures'}>\n                <a className={styles.text}>Перейти к лекциям</a>\n            </Link>\n        </div>\n    );\n}","import React from \"react\";\nimport styles from './App.module.css';\nimport {Lectures} from \"./components/lectures/lectures\";\nimport {Route, Switch} from \"react-router\";\nimport {Lecture} from \"./components/lecture/lecture\";\nimport {MainPage} from \"./components/main-page/main-page\";\n\nfunction App() {\n  return (\n      <div className={styles.app}>\n          <Switch>\n              <Route exact path='/' component={MainPage} />\n              <Route exact path='/lectures' component={Lectures} />\n              <Route path='/lectures/:lectureId' component={Lecture} />\n          </Switch>\n      </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}